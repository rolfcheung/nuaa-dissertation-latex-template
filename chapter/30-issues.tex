\chapter{已知问题}

这份模板还有很多欠缺的地方，有些问题虽然被发现了，
但目前还没找到满意的解决方法。本章记录模板还没解决的问题，希望用户能避开这些坑。
如果您有解决这些问题的思路，欢迎在 Github 上提交 issue 或 pull request。

\section{本模板的问题}

\subsection{英文 in 中文字体}

本模板部分英文的字体，与 Word 模板里不一样。

虽然要求里说，英文的字体要用 Times New Roman\textsuperscript{\textregistered}，
但 Word 模板里，不少地方的英文、数字的字体不是 Times New Roman\textsuperscript{\textregistered}，
而是旁边中文的字体。
比如正文的各级标题，还有本科封面，在 Word 模板里，这些西文的字体设置成“使用中文字体”。

\subsection{行间距}

行间距的问题由两方面造成：不知道 Word 是如何计算行间距；以及，不知道 \LaTeX 如何准确设置行间距。
这些不能准确计算的行间距目前只能通过测量来确定。

% 虽然理论上，《论文撰写要求》就应该完整地描述论文的格式。但实际上，……

网上能找到部分 Word 排版算法的解析\footnote{\url{https://www.zhihu.com/question/26397264/answer/48165229}}，
根据这些资料能计算出大部分《论文撰写要求》没有明确规定的格式，
但本科论文的页眉（页眉插入了一张图片）等地方，它们的排版算法与资料中的不一样。

\LaTeX 方面，貌似它会试图对齐所有页面的第一行？
在页首插入垂直空格时，会插入多余的空间。
还有，如果正文的各级标题出现在页首，那么它们的 \texttt{before} 段前间隔会被忽略掉。

\subsection{字号}

由于行间距的问题，请尽量避免使用规定字号以外的大小。

\LaTeX 貌似不能像 Word 那样设置成固定行间距，轻易修改全局字号、行间距可能会引发各种奇怪问题，
所以本模板只通过 ctex 的接口，设置了 \texttt{zihao} 和 \texttt{linespread}，
实现近似模板中的行间距效果。

\subsection{图表清单}

《要求》里并没有规定图表清单的格式，\LaTeX 里图清单和表清单是两个独立的列表，
所以每个列表里，章节之间会添加空行来提高可读性。
在两个列表合并到一起后，这些空行可能会反过来影响可读性，所以考虑将其去除……但是能力有限，没能去掉。
虽然参考了\footnote{\url{https://tex.stackexchange.com/a/331881}}，但貌似因为使用了某些宏包，
或者完全不是这种情况，所以没有成功。

\subsection{段落左侧缩进}

本科生正文要求段落左侧缩进2~字符，但\LaTeX 貌似有点麻烦，网上提到的方法大致可以分为两种：
一种把正文全都都加到一个环境里，另一种是每段前加一个命令来缩进。这两种都不是理想的解决方法，
参见讨论\footnote{\url{https://github.com/JackWzh/nuaathesis/issues/7}}。

\section{其他常见问题}

\subsection{宋体的粗体}\label{txt:issue:boldsun}

宋体的粗体可能会被换成黑体。
比如“\verb|右边是\textbf{粗宋体}|”，排版出来可能是“{右边是\heiti{粗宋体}}”。

这个问题源自很多宋体不带粗体，ctex 预置的6个字库中，只有 Fandol 和方正字库带有宋体的粗体。
但关键是 ctex 将其他字库中宋体的粗体，映射成黑体了。

解决方法有很多，一个方法是将代码写成“\verb|右边是\textbf{\songti 粗宋体}|”，
如果开启了 \texttt{AutoFakeBold}，就可以伪粗体的宋体了。

另一个方法是使用 Fandol 字库或方正字库，不过它们的粗宋体比 Word 论文模板里的要粗/重很多，
特别是作为标题使用时，差异会很大。

还有一些方法，比如修改字体映射之类，应该可行的样子，有兴趣的读者可以尝试研究一下。
